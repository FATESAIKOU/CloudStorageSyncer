# 檔案上傳功能處理流程設計

## 1. 簡化流程概觀

```plantuml
@startuml
!theme plain

start
:用戶執行 CLI 命令;
:解析檔案路徑和參數;
:載入 S3 配置;

if (配置完整?) then (是)
  :檢查檔案存在性;
  if (檔案存在?) then (是)
    :建立 boto3 客戶端;
    :執行檔案上傳;
    :顯示成功訊息;
  else (否)
    :顯示檔案不存在錯誤;
  endif
else (否)
  :顯示配置不完整錯誤;
endif

stop
@enduml
```

## 2. 配置管理流程

```plantuml
@startuml
!theme plain

start
:用戶設定配置;

if (配置項目有效?) then (是)
  :更新配置值;
  :儲存到檔案;
  :顯示成功訊息;
else (否)
  :顯示無效配置項目;
endif

stop
@enduml
```

## 3. CLI 命令結構設計

### 3.1 配置命令
```bash
# 設定 AWS 認證資訊
cloud-storage-syncer config set access-key YOUR_ACCESS_KEY
cloud-storage-syncer config set secret-key YOUR_SECRET_KEY
cloud-storage-syncer config set bucket YOUR_BUCKET_NAME
cloud-storage-syncer config set region us-west-2

# 查看當前配置
cloud-storage-syncer config show

# 測試配置
cloud-storage-syncer config test
```

### 3.2 上傳命令
```bash
# 基本上傳 (使用預設 Intelligent-Tiering)
cloud-storage-syncer upload /path/to/file.txt

# 指定 Storage Class
cloud-storage-syncer upload /path/to/file.txt --storage-class STANDARD

# 指定 S3 中的檔名
cloud-storage-syncer upload /path/to/file.txt --key my-folder/renamed-file.txt
```

## 4. 基本錯誤處理

簡單的錯誤處理策略：
- 檔案不存在 → 顯示錯誤訊息
- 配置不完整 → 提示設定配置
- S3 操作失敗 → 顯示 boto3 原始錯誤
- 網路問題 → 顯示連接錯誤
